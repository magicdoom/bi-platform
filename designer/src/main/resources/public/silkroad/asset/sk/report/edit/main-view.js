define(["template","dialog","report/edit/main-model","report/edit/main-template","report/edit/ind-template","report/edit/dim-template","report/edit/drag-ind-dim/main-view","report/edit/ue-view","report/global-setting-btns/btns-view"],function(a,b,c,d,e,f,g,h,i){return Backbone.View.extend({events:{"change .j-cube-select":"changeCube","click .j-global-para":"setglobalbtn"},initialize:function(a){this.model=new c({id:this.id,isEdit:a.isEdit}),this.model.loadCubeList(),this.btnsView=new i,this.initListening()},setglobalbtn:function(){this.model.loadDimList();var a={};a.dimList=this.model.get("dimList"),this.btnsView.setGlobal(a)},changeCube:function(a){var b=$(a.target).val();this.model.set({currentCubeId:b}),this.dragView.initAll()},initListening:function(){var a=this;this.listenToOnce(this.model,"change:cubeList",function(b,c){a.$el.html(d.render({cubeList:c})),a.initChildView()}),this.listenTo(this.model,"change:indList",function(b,c){a.$el.find(".j-data-sources-setting-con-ind").html(e.render({indList:c})),a.dragView.initAll()}),this.listenTo(this.model,"change:dimList",function(b,c){a.$el.find(".j-data-sources-setting-con-dim").html(f.render({dimList:c})),a.dragView.initAll()})},initChildView:function(){var a=this;require(["report/edit/setting/main-view"],function(b){new b({el:a.$el.find(".j-data-sources-setting"),id:a.id,parentView:a})}),a.dragView=new g({el:a.$el.find(".j-data-sources-setting"),id:a.id,parentView:a}),a.ueView=new h({el:a.$el,id:a.id,parentView:a}),require(["report/edit/canvas/canvas-view"],function(b){a.canvas=new b({el:a.$el.find(".j-canvas"),id:a.id,parentView:a})}),$(document).mousedown(function(a){$.contains($(".j-global-btn")[0],a.target)||$(".j-all-menus")&&!$.contains($(".j-global-menu")[0],a.target)&&$(".j-all-menus").each(function(){$(this).hide()})})},destroy:function(){this.model.clear({silent:!0}),this.stopListening(),$(this.el).unbind().empty(),this.canvas.destroy(),$(".j-foot").show()}})});