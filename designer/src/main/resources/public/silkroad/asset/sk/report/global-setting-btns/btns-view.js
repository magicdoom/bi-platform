define(["template","dialog","report/global-setting-btns/para-btn-template","report/global-setting-btns/select-template","report/global-setting-btns/btns-model"],function(a,b,c,d,e){return Backbone.View.extend({initialize:function(){this.model=new e},setGlobal:function(a){function e(e){var h,i={};i.para=e.data,i.dimList=a.dimList,h=c.render(i),b.showDialog({content:h,title:"参数维度设置",dialog:{height:400,width:500,open:function(){var b=$(this);b.on("click",".j-global-close",function(){$(this).parent().remove()}),b.find(".j-global-add").click(function(){$(".j-con-global-attr").append(d.render(a))})},buttons:{"确认":function(){var a=$(this);f._getParaDim(g,a),$(this).dialog("close")},"取消":function(){$(this).dialog("close")}}}})}var f=this,g=window.dataInsight.main.id;this.model.getParameterDim(g,e)},_getParaDim:function(a,b){var c={};c.params={},c.params=this._getParaDimData(b),this.model.getParameterDimData(a,c)},_getParaDimData:function(a){var b=a.find(".j-global-attr"),c={};return b.each(function(){var a=$(this).find(".parameter-name").val(),b=$(this).find(".parameter-default").val(),d=$(this).find(".parameter-needed").is(":checked"),e=$(this).find(".parameter-id").val();c[a]={};var f=c[a];f.name=a,f.defaultValue=b,f.needed=d,f.elementId=e}),c}})});